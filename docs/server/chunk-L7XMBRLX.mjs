import './polyfills.server.mjs';
import{a as V,b as f,c as M,d as k,e as $,f as b,g as j,h as I,i as O,l as z}from"./chunk-6RO7PS6K.mjs";import{a as B}from"./chunk-EMJPZWYO.mjs";import"./chunk-UPZVLXEB.mjs";import{k as G}from"./chunk-OSVV6JAO.mjs";import{Bb as a,Cb as L,Fb as A,Ib as R,Na as o,V as N,Z as q,cb as _,eb as F,ib as c,mb as n,nb as r,ob as C,oc as D,tb as x,ub as y}from"./chunk-NLDXJT5S.mjs";import"./chunk-VVCT4QZE.mjs";var T=(t,i)=>({"is-valid":t,"is-invalid":i});function H(t,i){t&1&&(n(0,"p",17),a(1,"Name is Required "),r())}function J(t,i){t&1&&(n(0,"p",17),a(1,"Name Should be more than or equal 3 chars"),r())}function K(t,i){t&1&&(n(0,"p",17),a(1,"Name Should be less than or equal 20 chars"),r())}function Q(t,i){if(t&1&&(n(0,"div",6),_(1,H,2,0,"p",17)(2,J,2,0)(3,K,2,0),r()),t&2){let l,s=y();o(),c(1,(l=s.registerForms.get("name"))!=null&&l.getError("required")?1:(l=s.registerForms.get("name"))!=null&&l.getError("minlength")?2:(l=s.registerForms.get("name"))!=null&&l.getError("maxlength")?3:-1)}}function U(t,i){t&1&&(n(0,"p",17),a(1,"Email is Required "),r())}function W(t,i){t&1&&(n(0,"p",17),a(1,"Enter Valid Email"),r())}function X(t,i){if(t&1&&(n(0,"div",6),_(1,U,2,0,"p",17)(2,W,2,0),r()),t&2){let l,s=y();o(),c(1,(l=s.registerForms.get("email"))!=null&&l.getError("required")?1:(l=s.registerForms.get("email"))!=null&&l.getError("email")?2:-1)}}function Y(t,i){t&1&&(n(0,"p",17),a(1,"phone is Required "),r())}function Z(t,i){t&1&&(n(0,"p",17),a(1,"accept only egypt phone numbers"),r())}function ee(t,i){if(t&1&&(n(0,"div",6),_(1,Y,2,0,"p",17)(2,Z,2,0),r()),t&2){let l,s=y();o(),c(1,(l=s.registerForms.get("phone"))!=null&&l.getError("required")?1:(l=s.registerForms.get("phone"))!=null&&l.getError("pattern")?2:-1)}}function te(t,i){t&1&&(n(0,"p",17),a(1,"Password is Required "),r())}function re(t,i){t&1&&(n(0,"p",17),a(1,"must be at least 6 chars"),r())}function ne(t,i){if(t&1&&(n(0,"div",6),_(1,te,2,0,"p",17)(2,re,2,0),r()),t&2){let l,s=y();o(),c(1,(l=s.registerForms.get("password"))!=null&&l.getError("required")?1:(l=s.registerForms.get("password"))!=null&&l.getError("pattern")?2:-1)}}function ie(t,i){t&1&&(n(0,"p",14),a(1,"Password confirmation is incorrect"),r())}function le(t,i){t&1&&(n(0,"span"),C(1,"i",18),r())}function oe(t,i){if(t&1&&(n(0,"p",16),a(1),r()),t&2){let l=y();o(),L(l.msgError)}}var ce=(()=>{let i=class i{constructor(){this._Router=N(G),this._AuthService=N(B),this.msgError="",this.isLodaing=!1,this.registerForms=new $({name:new b(null,[f.required,f.maxLength(20),f.minLength(3)]),email:new b(null,[f.required,f.email]),phone:new b(null,[f.required,f.pattern(/^01[0125][0-9]{8}$/)]),password:new b(null,[f.required,f.pattern(/^\w{6,}$/)]),rePassword:new b(null)},this.confirmPassword)}registerSubmit(){if(this.isLodaing=!0,this.registerForms.valid){let s=this.registerForms.value;this.registerSubscription=this._AuthService.setRegisterForm(s).subscribe({next:h=>{h.message==="success"&&this._Router.navigate(["/login"]),this.isLodaing=!1,console.log(h)},error:h=>{this.isLodaing=!1}})}else this.registerForms.setErrors({mismatch:!0}),this.registerForms.markAllAsTouched()}confirmPassword(s){return s.get("password")?.value===s.get("rePassword")?.value?null:{mismatch:!0}}ngOnDestroy(){this.registerSubscription?.unsubscribe()}};i.\u0275fac=function(h){return new(h||i)},i.\u0275cmp=q({type:i,selectors:[["app-register"]],standalone:!0,features:[A],decls:34,vars:29,consts:[[1,"bg-main-light","p-2","my-5","shadow","rounded-4"],[1,"text-main","h2","mb-3"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","name"],["formControlName","name","id","name","type","text",1,"form-control","mt-1",3,"ngClass"],[1,"alert","alert-danger"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control","mt-1",3,"ngClass"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control","mt-1",3,"ngClass"],["for","password"],["formControlName","password","id","password","type","password",1,"form-control","mt-1",3,"ngClass"],["formControlName","rePassword","id","password","type","password",1,"form-control","mt-1",3,"ngClass"],[1,"m-0","alert","alert-danger"],[1,"btn-main","d-block","ms-auto","mt-3",3,"disabled"],[1,"alert","alert-danger","m-0","w-25","mx-auto","text-center"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner","ps-1"]],template:function(h,e){if(h&1&&(n(0,"section",0)(1,"h1",1),a(2,"Register Now:"),r(),n(3,"form",2),x("ngSubmit",function(){return e.registerSubmit()}),n(4,"div",3)(5,"label",4),a(6,"Name"),r(),C(7,"input",5),_(8,Q,4,1,"div",6),r(),n(9,"div",3)(10,"label",7),a(11,"Email"),r(),C(12,"input",8),_(13,X,3,1,"div",6),r(),n(14,"div",3)(15,"label",9),a(16,"Phone"),r(),C(17,"input",10),_(18,ee,3,1,"div",6),r(),n(19,"div",3)(20,"label",11),a(21,"Password"),r(),C(22,"input",12),_(23,ne,3,1,"div",6),r(),n(24,"div",3)(25,"label",11),a(26,"rePassword"),r(),C(27,"input",13),_(28,ie,2,0,"p",14),r(),n(29,"div",3)(30,"button",15),a(31,"Register "),_(32,le,2,0,"span"),r(),_(33,oe,2,1,"p",16),r()()()),h&2){let m,v,u,w,d,E,g,S,p,P;o(3),F("formGroup",e.registerForms),o(4),F("ngClass",R(14,T,!((m=e.registerForms.get("name"))!=null&&m.errors)&&(((m=e.registerForms.get("name"))==null?null:m.touched)||((m=e.registerForms.get("name"))==null?null:m.dirty)),((m=e.registerForms.get("name"))==null?null:m.errors)&&(((m=e.registerForms.get("name"))==null?null:m.touched)||((m=e.registerForms.get("name"))==null?null:m.dirty)))),o(),c(8,(v=e.registerForms.get("name"))!=null&&v.errors&&((v=e.registerForms.get("name"))!=null&&v.touched||(v=e.registerForms.get("name"))!=null&&v.dirty)?8:-1),o(4),F("ngClass",R(17,T,!((u=e.registerForms.get("email"))!=null&&u.errors)&&(((u=e.registerForms.get("email"))==null?null:u.touched)||((u=e.registerForms.get("email"))==null?null:u.dirty)),((u=e.registerForms.get("email"))==null?null:u.errors)&&(((u=e.registerForms.get("email"))==null?null:u.touched)||((u=e.registerForms.get("email"))==null?null:u.dirty)))),o(),c(13,(w=e.registerForms.get("email"))!=null&&w.errors&&((w=e.registerForms.get("email"))!=null&&w.touched||(w=e.registerForms.get("email"))!=null&&w.dirty)?13:-1),o(4),F("ngClass",R(20,T,!((d=e.registerForms.get("phone"))!=null&&d.errors)&&(((d=e.registerForms.get("phone"))==null?null:d.touched)||((d=e.registerForms.get("phone"))==null?null:d.dirty)),((d=e.registerForms.get("phone"))==null?null:d.errors)&&(((d=e.registerForms.get("phone"))==null?null:d.touched)||((d=e.registerForms.get("phone"))==null?null:d.dirty)))),o(),c(18,(E=e.registerForms.get("phone"))!=null&&E.errors&&((E=e.registerForms.get("phone"))!=null&&E.touched||(E=e.registerForms.get("phone"))!=null&&E.dirty)?18:-1),o(4),F("ngClass",R(23,T,!((g=e.registerForms.get("password"))!=null&&g.errors)&&(((g=e.registerForms.get("password"))==null?null:g.touched)||((g=e.registerForms.get("password"))==null?null:g.dirty)),((g=e.registerForms.get("password"))==null?null:g.errors)&&(((g=e.registerForms.get("password"))==null?null:g.touched)||((g=e.registerForms.get("password"))==null?null:g.dirty)))),o(),c(23,(S=e.registerForms.get("password"))!=null&&S.errors&&((S=e.registerForms.get("password"))!=null&&S.touched||(S=e.registerForms.get("password"))!=null&&S.dirty)?23:-1),o(4),F("ngClass",R(26,T,!((p=e.registerForms.get("rePassword"))!=null&&p.errors)&&(((p=e.registerForms.get("rePassword"))==null?null:p.touched)||((p=e.registerForms.get("rePassword"))==null?null:p.dirty)),((p=e.registerForms.get("rePassword"))==null?null:p.errors)&&(((p=e.registerForms.get("rePassword"))==null?null:p.touched)||((p=e.registerForms.get("password"))==null?null:p.dirty)))),o(),c(28,e.registerForms.getError("mismatch")&&((P=e.registerForms.get("rePassword"))!=null&&P.touched||(P=e.registerForms.get("rePassword"))!=null&&P.dirty)?28:-1),o(2),F("disabled",e.registerForms.invalid||e.isLodaing),o(2),c(32,e.isLodaing?32:-1),o(),c(33,e.msgError?33:-1)}},dependencies:[z,j,V,M,k,I,O,D]});let t=i;return t})();export{ce as RegisterComponent};
